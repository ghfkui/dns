{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "container|align": "stretch",
        "designer|userAlias": "RoutemgrView",
        "designer|userClassName": "RoutemgrView",
        "layout": "vbox",
        "rowUpdate": false,
        "title": "路由管理",
        "urlUpdate": "../route/update"
    },
    "name": "MyPanel17",
    "configAlternates": {
        "rowUpdate": "boolean"
    },
    "designerId": "bb12f71f-3f45-4249-bf47-0c7864d0cee2",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "rowUpdate",
            "type": "string"
        },
        {
            "group": "(Custom Properties)",
            "name": "urlUpdate",
            "type": "string"
        }
    ],
    "viewControllerInstanceId": "520b6b51-5aa6-48c1-84b9-8528cef807ed",
    "viewModelInstanceId": "3c957f11-1a8f-47d1-984b-caf75234268f",
    "cn": [
        {
            "type": "Ext.tab.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "activeTab": 0,
                "layout|flex": 1,
                "margin": 10
            },
            "name": "MyTabPanel3",
            "designerId": "1ec95ab4-ce4a-4c0e-afb1-f2050d7df74d",
            "cn": [
                {
                    "type": "Ext.panel.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "autoScroll": true,
                        "container|align": "stretch",
                        "layout": "vbox",
                        "title": "路由列表"
                    },
                    "name": "MyPanel17",
                    "designerId": "e8011003-a21a-4154-9f53-1908f1c1f158",
                    "cn": [
                        {
                            "type": "Ext.tab.Tab",
                            "reference": {
                                "name": "tabConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "TabConfig8",
                            "designerId": "77300649-6176-4322-8927-0cd2cef4a5ce"
                        },
                        {
                            "type": "Ext.grid.Panel",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "autoLoad": true,
                                "autoScroll": true,
                                "header": false,
                                "itemId": "routeList",
                                "layout|flex": 1,
                                "scroll": "vertical",
                                "store": "StoreRoute",
                                "title": "routeList"
                            },
                            "name": "MyGridPanel",
                            "designerId": "3ca46991-597b-472b-a52d-b5e937140b03",
                            "cn": [
                                {
                                    "type": "Ext.grid.column.Column",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "dataIndex": "route",
                                        "text": "名称",
                                        "width": "10%"
                                    },
                                    "name": "MyColumn3",
                                    "designerId": "e205fb38-6ccf-4075-b27d-55a17693a14d"
                                },
                                {
                                    "type": "Ext.grid.column.Column",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "dataIndex": "eth",
                                        "text": "网卡"
                                    },
                                    "name": "MyColumn",
                                    "designerId": "5ba55432-5981-4eae-a644-14731d1a1994"
                                },
                                {
                                    "type": "Ext.grid.column.Column",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "dataIndex": "address",
                                        "text": "网络地址",
                                        "width": "20%"
                                    },
                                    "name": "MyColumn5",
                                    "designerId": "e4e267f3-a3cc-4aeb-9ea4-3335cba1cac8"
                                },
                                {
                                    "type": "Ext.grid.column.Column",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "dataIndex": "gateway",
                                        "text": "网关地址",
                                        "width": "20%"
                                    },
                                    "name": "MyColumn4",
                                    "designerId": "e7b769bb-6397-4ebb-b86e-fff001b0cd3c"
                                },
                                {
                                    "type": "Ext.grid.column.Column",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "dataIndex": "enabled",
                                        "text": "状态"
                                    },
                                    "name": "MyColumn7",
                                    "designerId": "cd7b6808-3630-43b8-a58c-9a33e03235ac",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "value",
                                                    "metaData",
                                                    "record",
                                                    "rowIndex",
                                                    "colIndex",
                                                    "store",
                                                    "view"
                                                ],
                                                "fn": "renderer",
                                                "implHandler": [
                                                    "if(record.data.enabled == 1){",
                                                    "    return '<a href=\"#\" class=\"enable\">启用</a>';",
                                                    "}else{",
                                                    "    return '<a href=\"#\" class=\"disable\">停用</a>';",
                                                    "}"
                                                ]
                                            },
                                            "name": "renderer",
                                            "designerId": "e7b4fb99-9daf-4470-8b97-a5f1b823bf36"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.grid.column.Column",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "dataIndex": "memo",
                                        "text": "备注"
                                    },
                                    "name": "MyColumn8",
                                    "designerId": "03fe8b36-e270-4ada-923d-1ab37253d759"
                                },
                                {
                                    "type": "Ext.grid.View",
                                    "reference": {
                                        "name": "viewConfig",
                                        "type": "object"
                                    },
                                    "codeClass": null,
                                    "name": "MyGridView",
                                    "designerId": "98fc1ae8-75a8-4260-85bc-7a59e0aaa311"
                                },
                                {
                                    "type": "Ext.grid.column.Action",
                                    "reference": {
                                        "name": "columns",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "text": "操作"
                                    },
                                    "name": "MyActionColumn",
                                    "designerId": "1f8c53c4-1f0e-4a10-8f06-32641c80d5aa",
                                    "cn": [
                                        {
                                            "type": "actioncolumnitem",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "altText": "修改",
                                                "designer|displayName": "edit",
                                                "icon": "image/edit.gif",
                                                "tooltip": "修改"
                                            },
                                            "name": "MyActionColumnItem",
                                            "designerId": "fb4aabba-e192-454d-9ef2-9f23ef36821b",
                                            "cn": [
                                                {
                                                    "type": "fixedfunction",
                                                    "reference": {
                                                        "name": "items",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "designer|params": [
                                                            "view",
                                                            "rowIndex",
                                                            "colIndex",
                                                            "item",
                                                            "e",
                                                            "record",
                                                            "row"
                                                        ],
                                                        "fn": "handler",
                                                        "implHandler": [
                                                            "console.log('a');",
                                                            "var tabpanel = view.up('tabpanel'),",
                                                            "    routeAddForm = tabpanel.down(\"form#routeAddForm\"),",
                                                            "    panel = tabpanel.up(\"panel\");",
                                                            "panel.rowUpdate = true;",
                                                            "routeAddForm.getForm().setValues(record.data);",
                                                            "routeAddForm.down(\"textfield[name=route]\").setDisabled(true);",
                                                            "tabpanel.setActiveItem(1);"
                                                        ]
                                                    },
                                                    "name": "handler",
                                                    "designerId": "396a0dd7-099c-4666-a4c4-6e24fc2542df"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "actioncolumnitem",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "altText": "删除",
                                                "designer|displayName": "delete",
                                                "icon": "image/delete.gif",
                                                "tooltip": "删除"
                                            },
                                            "name": "MyActionColumnItem3",
                                            "designerId": "865a5ef0-a161-4985-a02c-d64a52ec6cc4",
                                            "cn": [
                                                {
                                                    "type": "fixedfunction",
                                                    "reference": {
                                                        "name": "items",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "designer|params": [
                                                            "view",
                                                            "rowIndex",
                                                            "colIndex",
                                                            "item",
                                                            "e",
                                                            "record",
                                                            "row"
                                                        ],
                                                        "fn": "handler",
                                                        "implHandler": [
                                                            "var route = record.data;",
                                                            "var confirm = {",
                                                            "    title: \"确认删除\",",
                                                            "    msg: \"请确认是否删除这个路由\",",
                                                            "    closable: false,",
                                                            "    buttons: Ext.MessageBox.YESNO,",
                                                            "    icon: Ext.MessageBox.WARNING,",
                                                            "    fn: function(btn) {",
                                                            "        if (btn == \"yes\") {",
                                                            "            Ext.Ajax.request({",
                                                            "                url: '../route/remove',",
                                                            "                success: function(data, a1, a2) {",
                                                            "                    view.getStore().load();",
                                                            "                    var result = Ext.decode(data.responseText);",
                                                            "                    if (result.success) {",
                                                            "                        Ext.Msg.alert('成功', result.msg);",
                                                            "                    }",
                                                            "                },",
                                                            "                failure: function(data) {",
                                                            "                    Ext.Msg.alert('失败', \"删除失败\");",
                                                            "                },",
                                                            "                jsonData: {",
                                                            "                    id: this.route.id",
                                                            "                },",
                                                            "                scope: {",
                                                            "                    route: this.route,",
                                                            "                    view: this.view",
                                                            "                }",
                                                            "            });",
                                                            "        }",
                                                            "    },",
                                                            "    scope: {",
                                                            "        route: route,",
                                                            "        view: view",
                                                            "    }",
                                                            "};",
                                                            "Ext.MessageBox.show(confirm, this);"
                                                        ]
                                                    },
                                                    "name": "handler",
                                                    "designerId": "50d749c3-8c3c-4553-8e50-285049aa3309"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "linkedinstance",
                                    "reference": {
                                        "name": "dockedItems",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "dock": "bottom",
                                        "store": "StoreRoute"
                                    },
                                    "name": "pagingtoolbar3",
                                    "designerId": "20254d4b-1f7d-4290-a21e-435dcdb48367",
                                    "masterInstanceId": "40325ae5-e6ff-42f0-9102-2dbf216cd896"
                                },
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onRouteListCellClick",
                                        "implHandler": [
                                            "var target = e.target,",
                                            "    route = record.data,",
                                            "    enabled = 0;",
                                            "if(target && target.className.indexOf(\"disable\") != -1){",
                                            "    enabled = 1;",
                                            "}",
                                            "Ext.Ajax.request({",
                                            "    url: '../route/status',",
                                            "    success: function(data, a1, a2) {",
                                            "",
                                            "        var result = Ext.decode(data.responseText);",
                                            "        if (result.success) {",
                                            "            this.route.enabled = this.enabled;",
                                            "            this.view.refresh();",
                                            "        }",
                                            "    },",
                                            "    failure: function(data) {",
                                            "        Ext.Msg.alert('失败', \"操作失败\");",
                                            "    },",
                                            "    jsonData: {",
                                            "        id: route.id,",
                                            "        enabled: enabled",
                                            "    },",
                                            "    scope: {",
                                            "        route: route,",
                                            "        enabled: enabled,",
                                            "        view: tableview",
                                            "    }",
                                            "});"
                                        ],
                                        "name": "cellclick",
                                        "scope": "me"
                                    },
                                    "name": "onRouteListCellClick",
                                    "designerId": "7b4e86f8-4b85-4e30-91d4-4313ced97d9a"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.panel.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "rowUpdate": null,
                        "title": "添加路由"
                    },
                    "name": "MyPanel20",
                    "designerId": "b28b11e4-712c-4df6-be05-4954fe059e18",
                    "customConfigs": [
                        {
                            "group": "(Custom Properties)",
                            "name": "rowUpdate",
                            "type": "string"
                        }
                    ],
                    "cn": [
                        {
                            "type": "Ext.tab.Tab",
                            "reference": {
                                "name": "tabConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "TabConfig12",
                            "designerId": "94f65aed-73d7-4233-902e-7a811115d181"
                        },
                        {
                            "type": "Ext.form.Panel",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "bodyPadding": 10,
                                "header": false,
                                "itemId": "routeAddForm",
                                "jsonSubmit": true,
                                "title": null,
                                "url": "../route/add"
                            },
                            "name": "MyForm8",
                            "designerId": "eaa8e615-f1ed-4d58-bd6e-f8956b47b084",
                            "cn": [
                                {
                                    "type": "Ext.form.field.Number",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "allowBlank": null,
                                        "fieldLabel": "id",
                                        "hidden": true,
                                        "layout|anchor": "60%",
                                        "name": "id"
                                    },
                                    "name": "MyNumberField8",
                                    "designerId": "adf4db1d-f229-41cf-8ae4-c5ef81921edb"
                                },
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "allowBlank": false,
                                        "fieldLabel": "路由名称",
                                        "layout|anchor": "60%",
                                        "name": "route"
                                    },
                                    "name": "MyTextField12",
                                    "designerId": "8f58f811-720c-4f78-9aef-40d58c2c7d34"
                                },
                                {
                                    "type": "Ext.form.field.ComboBox",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "disableKeyFilter": true,
                                        "displayField": "name",
                                        "fieldLabel": "选择网卡",
                                        "layout|anchor": "60%",
                                        "name": "eth",
                                        "store": "StoreEth",
                                        "valueField": "name",
                                        "width": null
                                    },
                                    "name": "MyComboBox2",
                                    "designerId": "e08cc408-882c-4b70-aff1-803daceb9a05"
                                },
                                {
                                    "type": "Ext.form.FieldContainer",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fieldLabel": "Label",
                                        "height": 30,
                                        "hideLabel": true,
                                        "layout": "hbox"
                                    },
                                    "name": "MyFieldContainer5",
                                    "designerId": "b426600a-d9c1-463d-81ae-2212c529b02f",
                                    "cn": [
                                        {
                                            "type": "Ext.form.field.Text",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fieldLabel": "网络地址",
                                                "layout|flex": null,
                                                "name": "ip"
                                            },
                                            "name": "MyTextField11",
                                            "designerId": "d67be1b3-cc68-486e-be15-20c409fdabf7"
                                        },
                                        {
                                            "type": "Ext.form.field.ComboBox",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "disableKeyFilter": true,
                                                "displayField": "mask",
                                                "fieldLabel": " /",
                                                "labelPad": null,
                                                "labelSeparator": "/",
                                                "labelWidth": 5,
                                                "margin": "0 0 0 5",
                                                "name": "mask",
                                                "padding": null,
                                                "store": "StoreMask",
                                                "valueField": "mask",
                                                "width": 60
                                            },
                                            "name": "MyComboBox3",
                                            "designerId": "33dafdce-f1a5-48fa-b218-a3c63ae212b8"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "allowBlank": false,
                                        "fieldLabel": "网关",
                                        "layout|anchor": "60%",
                                        "modelValidation": false,
                                        "name": "gateway"
                                    },
                                    "name": "MyTextField",
                                    "designerId": "40667bec-75c8-4608-9ca8-e9ecaa500658"
                                },
                                {
                                    "type": "Ext.form.field.TextArea",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fieldLabel": "描述",
                                        "layout|anchor": "60%",
                                        "name": "memo"
                                    },
                                    "name": "MyTextArea4",
                                    "designerId": "9f47591f-f85f-465f-bbc7-457b4525ef38"
                                },
                                {
                                    "type": "Ext.form.field.Checkbox",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "boxLabel": "立即启用",
                                        "fieldLabel": "生效设置",
                                        "layout|anchor": "100%",
                                        "name": "enabled"
                                    },
                                    "name": "MyCheckbox2",
                                    "designerId": "c3f571b3-807e-4e7f-b295-200d6a7ef612"
                                },
                                {
                                    "type": "Ext.toolbar.Toolbar",
                                    "reference": {
                                        "name": "dockedItems",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "container|align": "bottom",
                                        "container|padding": null,
                                        "dock": "bottom"
                                    },
                                    "name": "MyToolbar3",
                                    "designerId": "09287fad-d1f7-43ed-94b9-151b8d52544c",
                                    "cn": [
                                        {
                                            "type": "Ext.button.Button",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "itemId": "save",
                                                "layout|flex": null,
                                                "text": "保存"
                                            },
                                            "name": "MyButton10",
                                            "designerId": "fb6e673c-0aed-413d-9c5f-08e33bca2832",
                                            "cn": [
                                                {
                                                    "type": "basiceventbinding",
                                                    "reference": {
                                                        "name": "listeners",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "fn": "onSaveClick",
                                                        "implHandler": [
                                                            " var me = this,",
                                                            "     form = me.down('form#routeAddForm'),",
                                                            "     valid = form.isValid();",
                                                            "if(!valid){",
                                                            "    return false;",
                                                            "}",
                                                            "if(me.rowUpdate){",
                                                            "    form.getForm().url = me.urlUpdate;",
                                                            "}",
                                                            "form.submit({",
                                                            "    waitMsg: '正在保存',",
                                                            "    success: function (form, action) {",
                                                            "        Ext.Msg.alert('成功', '路由保存成功');",
                                                            "        ",
                                                            "        if(me.rowUpdate){",
                                                            "            me.down(\"pagingtoolbar\").doRefresh();",
                                                            "        }else{",
                                                            "            me.down(\"gridpanel#routeList\").getStore().load();",
                                                            "        }",
                                                            "        me.resetForm();",
                                                            "",
                                                            "    },",
                                                            "    failure: function (form, action) {",
                                                            "        Ext.Msg.alert('失败',  action.result.msg);",
                                                            "    }",
                                                            "});"
                                                        ],
                                                        "name": "click",
                                                        "scope": "me"
                                                    },
                                                    "name": "onSaveClick",
                                                    "designerId": "e75298ca-1f7f-49b0-9ad6-255d6a2052b0"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "Ext.button.Button",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "itemId": "cancel",
                                                "layout|flex": null,
                                                "margin": "0 0 0 50",
                                                "text": "取消",
                                                "textAlign": null
                                            },
                                            "name": "MyButton12",
                                            "designerId": "54f3bb2c-6243-4306-bc9a-762e6324ad40",
                                            "cn": [
                                                {
                                                    "type": "basiceventbinding",
                                                    "reference": {
                                                        "name": "listeners",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "fn": "onCancelClick",
                                                        "implHandler": [
                                                            "this.resetForm();"
                                                        ],
                                                        "name": "click",
                                                        "scope": "me"
                                                    },
                                                    "name": "onCancelClick",
                                                    "designerId": "1189cfb2-ef85-475f-b050-6eb770ee3fde"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onPanelDeactivate",
                                "implHandler": [
                                    "this.resetForm();"
                                ],
                                "name": "deactivate",
                                "scope": "me"
                            },
                            "name": "onPanelDeactivate",
                            "designerId": "140ca114-c165-4400-b9f9-c38516e7f9a5"
                        }
                    ]
                }
            ]
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "resetForm",
                "implHandler": [
                    "var me = this,",
                    "    tabpanel = me.down(\"tabpanel\"),",
                    "    routeAddForm = me.down(\"form#routeAddForm\");",
                    "tabpanel.setActiveItem(0);",
                    "routeAddForm.down(\"textfield[name=route]\").setDisabled(false);",
                    "routeAddForm.reset();"
                ]
            },
            "name": "resetForm",
            "designerId": "afe02faf-f641-4876-8291-027616b25c36"
        }
    ]
}